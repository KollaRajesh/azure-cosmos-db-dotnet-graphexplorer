# DocumentDB Graph Explorer #
This quick start application shows how to interact with DocumentDB through it's new graph interface.  The query language used is [Gremlin](https://en.wikipedia.org/wiki/Gremlin_(programming_language)) which is a [graph](https://en.wikipedia.org/wiki/Graph_(discrete_mathematics)) transversal langauge that uses vertices and edges as primary constructs.  This sample shows how to put your data into DocumentDB through a console application using the Azure DocumentDB graph library as well as querying the data using the Gremlin langauge specification from a user interface.

## Prerequisites ##
* A Microsoft Azure subscription ([MSDN](https://msdn.microsoft.com/en-us/default.aspx) or the [free trial subscription](http://azure.microsoft.com/en-us/pricing/free-trial/) is sufficient).  The samples can also be run without an Azure subscription against the 
[DocumentDB Emulator](https://docs.microsoft.com/en-us/azure/documentdb/documentdb-nosql-local-emulator).
* Visual Studio 2015 or later.

## Contents of the Sample ##
The Sample has two projects:
* A console application for uploading some sample data into DocumentDB.  
* An ASP.NET MVC application that shows how to query the graph using the Gremlin language.

## How to run the sample ##
### Uploading the sample data ###
Uploading the sample data is done via the console application project included in this quickstart.
1. Open the <font color='lightblue'>/tools/GraphDataUploaderSample.sln</font> solution in Visual Studio.
2. Edit the app.config.  Enter your DocumentDB connection parameters on the following appsettings:

| AppSetting             |     Value                                                                        |
|:-----------------------|:---------------------------------------------------------------------------------|
| DocDBEndPoint          | The DocumentDB service endpoint (https://{your instance}.documents.azure.com)    |
| DocDBKey               | The authentication key generated by Azure on your DocumentDB instance            |
| DocDBDatabase          | The DocumentDB database name                                                     |
| DocDBCollection        | The DocumentDB collection name                                                   |

3. Run the console app.  The documents should be imported into your DocumentDB.  You can use the document explorer to view the json content.


### Running the application ###
1. Open the <font color='lightblue'>/web/GraphExplorer.sln</font> solution in Visual Studio.
2. Edit the appsettings.json.  Enter your DocumentDB connection parameters on the following appsettings:

| AppSetting              |     Value                                                                       |
|:------------------------|:--------------------------------------------------------------------------------|
| ServiceEndpoint         | The DocumentDB service endpoint (https://{your instance}.documents.azure.com)   |
| AuthKeyOrResourceToken  | The authentication key generated by Azure on your DocumentDB instance           |


3. Run the application (F5).

## Basic Description of the Application ##
The web application allows you to run Gremlin queries against the sample data as well as data you create yourself.  It also allows you to assign icons and colors to vertices and edges and the default label for them to beautify the visualization of the graph.  Other features on the web application are:
* **Saving and Loading Gremlin queries**.  (Note: If you upload the sample data, a set of sample queries will be available for you.)
* **A console area for showing the output of the Gremlin query**.  Not all results are in a graph structure.  Results could be string, or a collection of strings.  These will show on the console area.  If the query resulted in an error, the error messages will also be shown on the console area.
* **Global settings for the graph visualization**.  For example, edge thinkness, icon sizes, graph stabilization parameters.
* **Creating a new collection**.  You can create a new collection or change between collections in the same DocumentDB.  This allows you to create a graph from scratch.  Node creation and updates right now uses the Gremlin syntax and is done via the command input box.

    ![Graph Explorer](images/graphexplorer.png)


## Open Source libraries used in the sample ##
This quick start application used some open source libraries (see also ThirdPartyNotices.txt for licenses):
* [Aurelia](http://aurelia.io/) - Aurelia is a JavaScript client framework for mobile, desktop and web leveraging simple conventions and empowering creativity.  Used for building the single page application on the ASP.NET web project.
* [vis.js](http://visjs.org/) - A dynamic, browser based visualization library.  Used for generating the network graph on the web project.
* [pretty-json](https://github.com/warfares/pretty-json) - Simple library to render/format a JS obj to an HTML view. 
